# AIéŸ³è§†é¢‘ç¿»è¯‘ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

Voice Clone Lingua Shift æ˜¯ä¸€ä¸ªåŸºäºäººå·¥æ™ºèƒ½æŠ€æœ¯çš„å¤šè¯­è¨€éŸ³è§†é¢‘ç¿»è¯‘ç³»ç»Ÿï¼Œèƒ½å¤Ÿå°†è§†é¢‘æˆ–éŸ³é¢‘å†…å®¹ä»ä¸€ç§è¯­è¨€ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€ï¼Œå¹¶é€šè¿‡éŸ³è‰²å…‹éš†æŠ€æœ¯ä¿æŒåŸè¯´è¯è€…çš„å£°éŸ³ç‰¹å¾ã€‚

ç³»ç»Ÿé›†æˆäº†è¯­éŸ³è¯†åˆ«ã€æ–‡æœ¬ç¿»è¯‘ã€éŸ³è‰²å…‹éš†ã€éŸ³é¢‘å¤„ç†ç­‰å¤šé¡¹æŠ€æœ¯ï¼Œå®ç°ç«¯åˆ°ç«¯çš„éŸ³è§†é¢‘ç¿»è¯‘æµç¨‹ã€‚æ”¯æŒä¸­æ–‡ä¸è‹±æ–‡ä¹‹é—´çš„åŒå‘ç¿»è¯‘ï¼Œé€‚ç”¨äºè§†é¢‘å†…å®¹æœ¬åœ°åŒ–ã€å¤šè¯­è¨€æ•™å­¦ã€è·¨è¯­è¨€å†…å®¹åˆ›ä½œç­‰åœºæ™¯ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### è§†é¢‘ä¸éŸ³é¢‘å¤„ç†
- æ”¯æŒå¤šç§è§†é¢‘æ ¼å¼ï¼ˆMP4ã€AVIã€MOVã€MKVç­‰ï¼‰å’ŒéŸ³é¢‘æ ¼å¼ï¼ˆWAVã€MP3ã€M4Aç­‰ï¼‰
- è‡ªåŠ¨æå–è§†é¢‘ä¸­çš„éŸ³é¢‘è½¨é“
- éŸ³é¢‘æ ¼å¼æ ‡å‡†åŒ–å¤„ç†ï¼ˆ16kHzã€å•å£°é“ã€WAVæ ¼å¼ï¼‰
- å…ƒæ•°æ®æå–ï¼ˆæ—¶é•¿ã€åˆ†è¾¨ç‡ã€é‡‡æ ·ç‡ç­‰ï¼‰

### æ™ºèƒ½éŸ³é¢‘åˆ†ç¦»
- ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆDemucsï¼‰è‡ªåŠ¨æ£€æµ‹å¹¶åˆ†ç¦»äººå£°å’ŒèƒŒæ™¯éŸ³ä¹
- ä¿ç•™èƒŒæ™¯éŸ³ä¹è½¨é“ï¼Œç”¨äºæœ€ç»ˆè§†é¢‘åˆæˆ
- é¢‘è°±åˆ†æè¯„ä¼°éŸ³é¢‘å¤æ‚åº¦ï¼Œæ™ºèƒ½å†³å®šæ˜¯å¦éœ€è¦åˆ†ç¦»

### é«˜ç²¾åº¦è¯­éŸ³è¯†åˆ«
- æ”¯æŒä¸¤ç§åç«¯ï¼šFaster-Whisperï¼ˆé»˜è®¤ï¼ŒåŸºäºCTranslate2ï¼Œé€Ÿåº¦æ›´å¿«ï¼‰å’ŒåŸç”ŸWhisperï¼ˆåŸºäºPyTorchï¼‰
- è‡ªåŠ¨åç«¯é€‰æ‹©ï¼šå¦‚æœé…ç½®çš„åç«¯ä¸å¯ç”¨ï¼Œä¼šè‡ªåŠ¨å›é€€åˆ°å¦ä¸€ä¸ªå¯ç”¨åç«¯
- æ”¯æŒè‡ªåŠ¨è¯­è¨€æ£€æµ‹
- ç”Ÿæˆå•è¯çº§åˆ«çš„æ—¶é—´æˆ³
- æ”¯æŒä¸¤ç§åˆ†æ®µæ–¹æ³•ï¼š
  - `punctuation`ï¼šåŸºäºæ ‡ç‚¹ç¬¦å·çš„åˆ†æ®µä¼˜åŒ–
  - `semantic`ï¼šåŸºäºæ ‡ç‚¹ç¬¦å·çš„è¯­ä¹‰å®Œæ•´åˆ†æ®µï¼ˆé»˜è®¤ï¼‰

### æ–‡æœ¬ç¿»è¯‘
- æ”¯æŒä¸­æ–‡ä¸è‹±æ–‡ä¹‹é—´çš„åŒå‘ç¿»è¯‘
- ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆé»˜è®¤ï¼šqwen-flashï¼‰è¿›è¡Œæ‰¹é‡ç¿»è¯‘
- æ”¯æŒå¤šç§Qwenæ¨¡å‹ï¼šqwen-flashã€qwen-plusã€qwen-maxã€qwen3-max-2025-09-23ç­‰
- ä¿æŒç¿»è¯‘ç»“æœçš„ä¸Šä¸‹æ–‡è¿è´¯æ€§
- è‡ªåŠ¨è·³è¿‡ç›¸åŒè¯­è¨€çš„ç¿»è¯‘ä»»åŠ¡
- è‡ªé€‚åº”é‡è¯•ç­–ç•¥ï¼Œæé«˜ç¿»è¯‘æˆåŠŸç‡

### éŸ³è‰²å…‹éš†
- åŸºäº IndexTTS2 æ¨¡å‹å®ç°éŸ³è‰²å…‹éš†
- ä¿æŒåŸè¯´è¯è€…çš„å£°éŸ³ç‰¹å¾ã€è¯­é€Ÿå’Œæƒ…æ„Ÿ
- æ”¯æŒ GPU åŠ é€Ÿå’Œ FP16 ç²¾åº¦ä¼˜åŒ–
- æ‰¹é‡å¤„ç†å¤šä¸ªéŸ³é¢‘ç‰‡æ®µ

### å¤šè¯´è¯äººå¤„ç†ï¼ˆå¯é€‰ï¼Œå½“å‰æ•ˆæœæœ‰é™ï¼‰
- è¯´è¯äººåˆ†ç¦»åŠŸèƒ½ï¼Œè¯†åˆ«å¹¶åŒºåˆ†ä¸åŒè¯´è¯è€…
- ä¸ºæ¯ä¸ªè¯´è¯äººç”Ÿæˆç´§å‡‘æ‹¼æ¥éŸ³è½¨ï¼ˆå»é™¤é™éŸ³ï¼‰
- æ„å»ºå…¨å±€æ—¶é—´ä¸ç´§å‡‘æ—¶é—´çš„æ˜ å°„å…³ç³»
- å¤šè¯´è¯äººåœºæ™¯ä¸‹çš„ç‹¬ç«‹è¯†åˆ«å’Œç¿»è¯‘å¤„ç†
- æ”¯æŒæ—¶é—´æˆ³æ˜ å°„å›å…¨å±€æ—¶é—´è½´
- **æ³¨æ„**ï¼šå½“å‰è¯´è¯äººåˆ†ç¦»æ•ˆæœæœ‰é™ï¼Œå»ºè®®ä½¿ç”¨ `--single-speaker` é€‰é¡¹è·³è¿‡æ­¤æ­¥éª¤ä»¥è·å¾—æ›´å¥½çš„å¤„ç†æ•ˆæœ

### ç³»ç»Ÿç‰¹æ€§
- Web UI ç•Œé¢ï¼šåŸºäº Gradio çš„å¯è§†åŒ–æ“ä½œç•Œé¢
- å‘½ä»¤è¡Œå·¥å…·ï¼šæ”¯æŒæ‰¹å¤„ç†å’Œè‡ªåŠ¨åŒ–è„šæœ¬
- æ¨¡å‹é¢„åŠ è½½ï¼šå¯åŠ¨æ—¶é¢„åŠ è½½æ¨¡å‹ï¼Œæå‡å¤„ç†é€Ÿåº¦
- GPU åŠ é€Ÿæ”¯æŒï¼šå…³é”®æ¨¡å—æ”¯æŒ CUDA åŠ é€Ÿ
- è¿›åº¦è·Ÿè¸ªï¼šå®æ—¶æ˜¾ç¤ºå¤„ç†è¿›åº¦å’ŒçŠ¶æ€
- æ—¥å¿—è®°å½•ï¼šå®Œæ•´çš„å¤„ç†æ—¥å¿—å’Œé”™è¯¯è¿½è¸ª

## ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **Whisper/Faster-Whisper**ï¼šè¯­éŸ³è¯†åˆ«å¼•æ“ï¼ˆæ”¯æŒä¸¤ç§åç«¯ï¼‰
- **Demucs**ï¼šéŸ³é¢‘åˆ†ç¦»æ¨¡å‹
- **Qwenç³»åˆ—**ï¼šæ–‡æœ¬ç¿»è¯‘å¤§è¯­è¨€æ¨¡å‹ï¼ˆé»˜è®¤qwen-flashï¼‰
- **IndexTTS2**ï¼šéŸ³è‰²å…‹éš†æ¨¡å‹
- **FFmpeg**ï¼šéŸ³è§†é¢‘å¤„ç†å·¥å…·

### å¤„ç†æµç¨‹

ç³»ç»Ÿé‡‡ç”¨ä¹æ­¥å¤„ç†æµç¨‹å®Œæˆè§†é¢‘ç¿»è¯‘ï¼š

1. **è§†é¢‘/éŸ³é¢‘å¤„ç†**ï¼šæå–éŸ³é¢‘è½¨é“ï¼Œæ ¼å¼æ ‡å‡†åŒ–ï¼Œæå–å…ƒæ•°æ®ï¼ˆæ—¶é•¿ã€åˆ†è¾¨ç‡ã€é‡‡æ ·ç‡ç­‰ï¼‰
2. **éŸ³é¢‘åˆ†ç¦»**ï¼šæ£€æµ‹å¹¶åˆ†ç¦»äººå£°å’ŒèƒŒæ™¯éŸ³ä¹
3. **å¤šè¯´è¯äººå¤„ç†ï¼ˆå¯é€‰ï¼‰**ï¼šè¯†åˆ«ä¸åŒè¯´è¯è€…ï¼Œç”Ÿæˆç´§å‡‘éŸ³è½¨ï¼Œæ„å»ºæ—¶é—´æ˜ å°„å…³ç³»
4. **è¯­éŸ³è¯†åˆ«**ï¼šä½¿ç”¨Whisper/Faster-Whisperè¿›è¡Œè½¬å½•ï¼Œç”Ÿæˆæ—¶é—´æˆ³å’Œåˆ†æ®µ
5. **æ–‡æœ¬ç¿»è¯‘**ï¼šæ‰¹é‡ç¿»è¯‘æ–‡æœ¬åˆ†æ®µ
6. **å‚è€ƒéŸ³é¢‘æå–**ï¼šä¸ºæ¯ä¸ªç¿»è¯‘ç‰‡æ®µæå–å¯¹åº”çš„å‚è€ƒéŸ³é¢‘ï¼ˆä¼˜å…ˆä»è¯´è¯äººç´§å‡‘éŸ³è½¨è£å‰ªï¼‰
7. **éŸ³è‰²å…‹éš†**ï¼šä¸ºæ¯ä¸ªç¿»è¯‘ç‰‡æ®µç”Ÿæˆä¿æŒåŸéŸ³è‰²çš„è¯­éŸ³
8. **éŸ³é¢‘åˆå¹¶**ï¼šæ ¹æ®æ—¶é—´æˆ³åŒæ­¥åˆå¹¶éŸ³é¢‘ç‰‡æ®µ
9. **è§†é¢‘åˆæˆ**ï¼šå°†ç¿»è¯‘åçš„éŸ³é¢‘ä¸åŸå§‹è§†é¢‘åˆæˆ

### æ”¯æŒçš„è¯­è¨€

- ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰
- è‹±æ–‡

## é¡¹ç›®ç»“æ„

```
voice_clone_lingua_shift/
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ media_processor.py        # åª’ä½“å¤„ç†ä¸»ç±»
â”‚   â”œâ”€â”€ enhanced_media_processor.py # å¢å¼ºåª’ä½“å¤„ç†å™¨ï¼ˆæ”¯æŒéŸ³é¢‘åˆ†ç¦»ï¼‰
â”‚   â”œâ”€â”€ audio_separator.py        # éŸ³é¢‘åˆ†ç¦»å™¨
â”‚   â”œâ”€â”€ whisper_processor.py      # Whisperè¯­éŸ³è¯†åˆ«å¤„ç†å™¨
â”‚   â”œâ”€â”€ text_translator.py        # æ–‡æœ¬ç¿»è¯‘å™¨
â”‚   â”œâ”€â”€ voice_cloner.py           # éŸ³è‰²å…‹éš†å™¨
â”‚   â”œâ”€â”€ timestamped_audio_merger.py # æ—¶é—´åŒæ­¥éŸ³é¢‘åˆå¹¶å™¨
â”‚   â”œâ”€â”€ speaker_diarizer.py       # è¯´è¯äººåˆ†ç¦»å™¨
â”‚   â”œâ”€â”€ model_preloader.py        # æ¨¡å‹é¢„åŠ è½½å™¨
â”‚   â””â”€â”€ ...                       # å…¶ä»–å·¥å…·æ¨¡å—
â”œâ”€â”€ index-tts/                    # IndexTTS2 éŸ³è‰²å…‹éš†å­æ¨¡å—
â”œâ”€â”€ data/                         # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ outputs/                  # è¾“å‡ºæ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ temp/                     # ä¸´æ—¶æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ logs/                     # æ—¥å¿—æ–‡ä»¶ç›®å½•
â”œâ”€â”€ docs/                         # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ media_translation_webui.py    # Web UI å…¥å£
â”œâ”€â”€ media_translation_cli.py      # å‘½ä»¤è¡Œå…¥å£
â”œâ”€â”€ run_webui.sh                  # Web UI å¯åŠ¨è„šæœ¬
â”œâ”€â”€ run_cli.sh                    # CLI ç¿»è¯‘å¯åŠ¨è„šæœ¬
â”œâ”€â”€ scripts/                      # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ install/                  # å®‰è£…è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ install_index_tts.sh
â”‚   â”‚   â”œâ”€â”€ install_with_uv.sh
â”‚   â”‚   â””â”€â”€ install_with_uv_china.sh
â”‚   â”œâ”€â”€ batch_translate.sh        # æ‰¹é‡ç¿»è¯‘è„šæœ¬
â”‚   â””â”€â”€ preload_models.sh         # æ¨¡å‹é¢„åŠ è½½è„šæœ¬
â”œâ”€â”€ tools/                        # å·¥å…·è„šæœ¬ç›®å½•
â”‚   â””â”€â”€ check_dependencies.py     # ä¾èµ–æ£€æŸ¥è„šæœ¬
â”œâ”€â”€ requirements_project.txt      # ä¸»é¡¹ç›®é¢å¤–ä¾èµ–
â”œâ”€â”€ config.yaml                   # é…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ INSTALL.md                # è¯¦ç»†å®‰è£…æŒ‡å—
â”‚   â”œâ”€â”€ USAGE.md                  # ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ CONTRIBUTING.md           # è´¡çŒ®æŒ‡å—
â”‚   â””â”€â”€ ...                       # å…¶ä»–æ–‡æ¡£
â””â”€â”€ README.md                     # é¡¹ç›®æ–‡æ¡£
```

## å®‰è£…ä¸é…ç½®

### ç³»ç»Ÿè¦æ±‚

- Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- FFmpegï¼ˆç³»ç»Ÿä¾èµ–ï¼‰
- CUDAï¼ˆå¯é€‰ï¼Œç”¨äºGPUåŠ é€Ÿï¼‰
- è‡³å°‘ 8GB å†…å­˜ï¼ˆæ¨è 16GB æˆ–æ›´å¤šï¼‰
- è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ï¼ˆç”¨äºæ¨¡å‹å’Œç¼“å­˜ï¼‰

### å®‰è£…æ­¥éª¤

æœ¬é¡¹ç›®ä¾èµ– `index-tts` å­æ¨¡å—ï¼Œä½¿ç”¨å…±äº«è™šæ‹Ÿç¯å¢ƒã€‚å®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š

```bash
# 1. å®‰è£… index-tts ä¾èµ–ï¼ˆåŒ…å« Web UI æ”¯æŒï¼‰
cd index-tts
uv sync --extra webui

# 2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¸»é¡¹ç›®é¢å¤–ä¾èµ–
source .venv/bin/activate
cd ..
pip install -r requirements_project.txt

# 3. ç¡®ä¿ç³»ç»Ÿå·²å®‰è£… FFmpeg
# Ubuntu/Debian:
sudo apt update && sudo apt install ffmpeg

# CentOS/RHEL:
sudo yum install ffmpeg

# 4. éªŒè¯å®‰è£…ï¼ˆå¯é€‰ï¼‰
python tools/check_dependencies.py

# 5. å¯åŠ¨ Web UI
./run_webui.sh
```

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼š[INSTALL.md](docs/INSTALL.md)

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä½¿ç”¨ `index-tts` å­æ¨¡å—çš„è™šæ‹Ÿç¯å¢ƒè¿è¡Œï¼Œç¡®ä¿åœ¨æ¿€æ´»è¯¥è™šæ‹Ÿç¯å¢ƒåè¿è¡Œé¡¹ç›®ã€‚

### ç¯å¢ƒå˜é‡é…ç½®

æœ¬é¡¹ç›®éœ€è¦ä½¿ç”¨é˜¿é‡Œäº‘ DashScopeï¼ˆQwenï¼‰API è¿›è¡Œæ–‡æœ¬ç¿»è¯‘ï¼Œéœ€è¦é…ç½® API å¯†é’¥ï¼š

```bash
# Linux/macOS
export DASHSCOPE_API_KEY='your-api-key-here'

# Windows (PowerShell)
$env:DASHSCOPE_API_KEY="your-api-key-here"

# Windows (CMD)
set DASHSCOPE_API_KEY=your-api-key-here
```

**è·å– API å¯†é’¥**ï¼š
1. è®¿é—® [é˜¿é‡Œäº‘ DashScope æ§åˆ¶å°](https://dashscope.console.aliyun.com/)
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. åˆ›å»º API å¯†é’¥
4. å°†å¯†é’¥è®¾ç½®ä¸ºç¯å¢ƒå˜é‡ `DASHSCOPE_API_KEY`

**æŒä¹…åŒ–é…ç½®**ï¼ˆæ¨èï¼‰ï¼š
å°†ç¯å¢ƒå˜é‡æ·»åŠ åˆ° shell é…ç½®æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿æ¯æ¬¡å¯åŠ¨ç»ˆç«¯æ—¶è‡ªåŠ¨åŠ è½½ï¼š

```bash
# æ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrc
echo 'export DASHSCOPE_API_KEY="your-api-key-here"' >> ~/.bashrc
source ~/.bashrc
```

**éªŒè¯é…ç½®**ï¼š
è¿è¡Œé¡¹ç›®åï¼Œå¦‚æœæœªæ­£ç¡®è®¾ç½® API å¯†é’¥ï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºæ˜ç¡®çš„é”™è¯¯æç¤ºï¼ŒæŒ‰ç…§æç¤ºè®¾ç½®å³å¯ã€‚

## ä½¿ç”¨æ–¹æ³•

### Web UI æ–¹å¼

å¯åŠ¨ Web UIï¼š

```bash
./run_webui.sh
```

å¯åŠ¨åè®¿é—® `http://localhost:7861`ï¼Œé€šè¿‡ç½‘é¡µç•Œé¢ä¸Šä¼ è§†é¢‘/éŸ³é¢‘å¹¶é…ç½®ç¿»è¯‘å‚æ•°ã€‚

**ä¸»è¦åŠŸèƒ½**ï¼š
- è§†é¢‘æ–‡ä»¶ä¸Šä¼ 
- æºè¯­è¨€å’Œç›®æ ‡è¯­è¨€é€‰æ‹©
- æ¨¡å‹é¢„åŠ è½½çŠ¶æ€æ˜¾ç¤º
- å¤„ç†è¿›åº¦å®æ—¶æ˜¾ç¤º
- ç»“æœé¢„è§ˆå’Œä¸‹è½½

### å‘½ä»¤è¡Œæ–¹å¼

#### å•ä¸ªæ–‡ä»¶ç¿»è¯‘

**æ¨èæ–¹å¼ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬**ï¼ˆè‡ªåŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼‰

```bash
# è‡ªåŠ¨æ£€æµ‹è¯­è¨€å¹¶ç¿»è¯‘
./run_cli.sh input.mp4

# æŒ‡å®šæºè¯­è¨€å’Œç›®æ ‡è¯­è¨€
./run_cli.sh input.mp4 --source-lang zh --target-lang en

# è‹±æ–‡è§†é¢‘ç¿»è¯‘æˆä¸­æ–‡
./run_cli.sh input.mp4 --source-lang en --target-lang zh

# æŒ‡å®šè¾“å‡ºç›®å½•
./run_cli.sh input.mp4 --output-dir my_output

# å¯ç”¨è¯¦ç»†æ—¥å¿—
./run_cli.sh input.mp4 --verbose

# æŒ‡å®šä»…ä¸€äººè¯´è¯ï¼ˆæ¨èï¼šè·³è¿‡è¯´è¯äººåˆ†ç¦»ï¼Œæå‡å¤„ç†é€Ÿåº¦å’Œå‡†ç¡®æ€§ï¼‰
./run_cli.sh input.mp4 --source-lang en --target-lang zh --single-speaker
```

#### æ‰¹é‡å¤„ç†ï¼ˆæ”¯æŒæ¨¡å‹é¢„åŠ è½½ï¼‰

**æ–¹å¼ä¸€ï¼šä½¿ç”¨æ‰¹é‡å¤„ç†è„šæœ¬**ï¼ˆæ¨èï¼Œè‡ªåŠ¨é¢„åŠ è½½æ¨¡å‹ï¼‰

```bash
# æ‰¹é‡ç¿»è¯‘å¤šä¸ªæ–‡ä»¶ï¼ˆè‡ªåŠ¨é¢„åŠ è½½æ¨¡å‹ï¼Œé¡ºåºå¤„ç†ï¼‰
./scripts/batch_translate.sh file1.mp4 file2.mp4 file3.mp4 --source-lang en --target-lang zh

# æ‰¹é‡ç¿»è¯‘æ—¶æŒ‡å®šå…¶ä»–é€‰é¡¹
./scripts/batch_translate.sh file1.mp4 file2.mp4 --source-lang en --target-lang zh --single-speaker

# ä»…é¢„åŠ è½½æ¨¡å‹ï¼Œä¸æ‰§è¡Œç¿»è¯‘
./scripts/batch_translate.sh --preload-only

# è·³è¿‡é¢„åŠ è½½ï¼Œç›´æ¥ç¿»è¯‘ï¼ˆæ¯ä¸ªä»»åŠ¡éƒ½ä¼šåŠ è½½æ¨¡å‹ï¼‰
./scripts/batch_translate.sh --no-preload file1.mp4 file2.mp4 --source-lang en --target-lang zh
```

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨é¢„åŠ è½½åé¡ºåºå¤„ç†**

```bash
# æ­¥éª¤1: é¢„åŠ è½½æ‰€æœ‰æ¨¡å‹ï¼ˆåªéœ€æ‰§è¡Œä¸€æ¬¡ï¼‰
./scripts/preload_models.sh

# æ­¥éª¤2: é¡ºåºæ‰§è¡Œå¤šä¸ªç¿»è¯‘ä»»åŠ¡ï¼ˆè‡ªåŠ¨å¤ç”¨é¢„åŠ è½½çš„æ¨¡å‹ï¼‰
./run_cli.sh file1.mp4 --source-lang en --target-lang zh
./run_cli.sh file2.mp4 --source-lang en --target-lang zh
./run_cli.sh file3.mp4 --source-lang en --target-lang zh
```

**æ¨¡å‹é¢„åŠ è½½çš„ä¼˜åŠ¿ï¼š**

- ğŸš€ **æå‡é€Ÿåº¦**ï¼šåç»­ç¿»è¯‘ä»»åŠ¡æ— éœ€é‡å¤åŠ è½½æ¨¡å‹ï¼Œæ˜¾è‘—å‡å°‘å¤„ç†æ—¶é—´
- ğŸ’¾ **èŠ‚çœå†…å­˜**ï¼šé€šè¿‡å•ä¾‹æ¨¡å¼å¤ç”¨å·²åŠ è½½çš„æ¨¡å‹å®ä¾‹
- ğŸ“Š **æ‰¹é‡å¤„ç†**ï¼šç‰¹åˆ«é€‚åˆé¡ºåºå¤„ç†å¤šä¸ªç¿»è¯‘ä»»åŠ¡

**æ³¨æ„äº‹é¡¹ï¼š**
- é¢„åŠ è½½çš„æ¨¡å‹çŠ¶æ€ä¿å­˜åœ¨ `/tmp/voice_clone_preloader_available` æ–‡ä»¶ä¸­
- å¦‚æœè¿›ç¨‹é‡å¯æˆ–æ¨¡å‹éœ€è¦æ›´æ–°ï¼Œè¯·åˆ é™¤è¯¥æ–‡ä»¶åé‡æ–°é¢„åŠ è½½
- æ‰¹é‡å¤„ç†è„šæœ¬ä¼šåœ¨å¼€å§‹æ—¶è‡ªåŠ¨æ£€æŸ¥å¹¶é¢„åŠ è½½æ¨¡å‹

**æ‰‹åŠ¨æ–¹å¼**ï¼ˆéœ€è¦å…ˆæ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼‰

å¦‚æœç›´æ¥ä½¿ç”¨ `python media_translation_cli.py`ï¼Œéœ€è¦å…ˆæ‰‹åŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# 1. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
cd index-tts
source .venv/bin/activate
cd ..

# 2. è®¾ç½®ç¯å¢ƒå˜é‡
export HF_ENDPOINT="https://hf-mirror.com"
export HF_HOME="${PWD}/index-tts/.cache/hf"
export PYTHONUNBUFFERED=1

# 3. è¿è¡Œç¿»è¯‘å‘½ä»¤
python media_translation_cli.py input.mp4 --source-lang en --target-lang zh
```

âš ï¸ **æ³¨æ„**ï¼šç›´æ¥è¿è¡Œ `python media_translation_cli.py` ä¼šæ¼æ‰ä»¥ä¸‹é‡è¦æ­¥éª¤ï¼š
- æ¿€æ´» IndexTTS2 è™šæ‹Ÿç¯å¢ƒ
- è®¾ç½® HuggingFace é•œåƒåœ°å€
- é…ç½® CUDA/CuDNN è¿è¡Œæ—¶åº“è·¯å¾„
- æ£€æŸ¥å¹¶å®‰è£…ç¼ºå¤±çš„ä¾èµ–

å› æ­¤ï¼Œ**å¼ºçƒˆæ¨èä½¿ç”¨å¯åŠ¨è„šæœ¬** `./run_cli.sh`ã€‚

**å‘½ä»¤è¡Œå‚æ•°**ï¼š

**åŸºæœ¬å‚æ•°**ï¼š
- `input_file`ï¼šè¾“å…¥è§†é¢‘æˆ–éŸ³é¢‘æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
- `--source-lang`ï¼šæºè¯­è¨€ï¼ˆautoã€zhã€enï¼‰ï¼Œé»˜è®¤ auto
- `--target-lang`ï¼šç›®æ ‡è¯­è¨€ï¼ˆautoã€zhã€enï¼‰ï¼Œé»˜è®¤ auto
- `--output-dir`ï¼šè¾“å‡ºç›®å½•ï¼Œé»˜è®¤ `data/outputs`
- `--voice-model`ï¼šéŸ³è‰²å…‹éš†æ¨¡å‹ï¼ˆindex-tts2ã€xttsï¼‰ï¼Œé»˜è®¤ index-tts2
- `--single-speaker`ï¼šä»…ä¸€äººè¯´è¯ï¼Œè·³è¿‡è¯´è¯äººåˆ†ç¦»æ­¥éª¤ï¼ˆ**æ¨èå¯ç”¨**ï¼Œå½“å‰è¯´è¯äººåˆ†ç¦»æ•ˆæœæœ‰é™ï¼‰
- `--verbose, -v`ï¼šæ˜¾ç¤ºè¯¦ç»†æ—¥å¿—

**ç¼–è¾‘å’Œç»§ç»­æ‰§è¡Œå‚æ•°**ï¼š
- `--pause-after`ï¼šåœ¨æŒ‡å®šæ­¥éª¤å®Œæˆåæš‚åœï¼Œå…è®¸æ‰‹åŠ¨ç¼–è¾‘æ–‡ä»¶ï¼ˆå¯é€‰å€¼ï¼š`step4`ã€`step5`ï¼‰
- `--continue-from`ï¼šä»æŒ‡å®šæ­¥éª¤ç»§ç»­æ‰§è¡Œï¼ˆå¯é€‰å€¼ï¼š`step5`ã€`step6`ï¼Œéœ€é…åˆ `--task-dir` ä½¿ç”¨ï¼‰
- `--task-dir`ï¼šä»»åŠ¡ç›®å½•è·¯å¾„ï¼ˆç”¨äº `--continue-from` å‚æ•°ï¼‰

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼š[ä½¿ç”¨æŒ‡å—](docs/USAGE.md)

**æ‰¹é‡å¤„ç†è„šæœ¬å‚æ•°**ï¼š

- `--preload-only`ï¼šä»…é¢„åŠ è½½æ¨¡å‹ï¼Œä¸æ‰§è¡Œç¿»è¯‘
- `--no-preload`ï¼šè·³è¿‡æ¨¡å‹é¢„åŠ è½½ï¼Œç›´æ¥ç¿»è¯‘
- `--help, -h`ï¼šæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

## é…ç½®è¯´æ˜

ç³»ç»Ÿé€šè¿‡ `config.yaml` æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚ä¸»è¦é…ç½®é¡¹åŒ…æ‹¬ï¼š

### éŸ³é¢‘å¤„ç†é…ç½®

```yaml
audio:
  sample_rate: 16000  # é‡‡æ ·ç‡ (Hz)
  format: "wav"       # è¾“å‡ºæ ¼å¼
  channels: 1         # å£°é“æ•° (å•å£°é“)
  bit_depth: 16       # ä½æ·±åº¦
```

### Whisper è¯­éŸ³è¯†åˆ«é…ç½®

```yaml
whisper:
  backend: "faster-whisper"  # åç«¯é€‰æ‹©: "whisper" æˆ– "faster-whisper"ï¼ˆé»˜è®¤faster-whisperï¼‰
  model_size: "medium"        # æ¨¡å‹å¤§å°: tiny, base, small, medium, large, large-v2, large-v3
  language: "auto"            # è¯­è¨€æ£€æµ‹: auto æˆ–å…·ä½“è¯­è¨€ä»£ç 
  device: "cuda"              # è®¾å¤‡ç±»å‹: auto, cpu, cuda
  fp16: false                 # FP16ç²¾åº¦åŠ é€Ÿï¼ˆéœ€è¦GPUæ”¯æŒï¼‰
  
  # Faster-Whisper ä¸“ç”¨å‚æ•°ï¼ˆæ”¹å–„åˆ†æ®µè´¨é‡ï¼‰
  faster_whisper_params:
    beam_size: 5                      # æŸæœç´¢å¤§å°ï¼Œæé«˜å‡†ç¡®æ€§ï¼ˆçŸ­éŸ³é¢‘è‡ªåŠ¨é™åˆ°1-3ï¼‰
    condition_on_previous_text: false # å…³é—­è·¨æ®µä¸Šä¸‹æ–‡ï¼Œé˜²æ­¢è·¨ä»»åŠ¡æ®‹ç•™åç½®
    compression_ratio_threshold: 2.4  # å‹ç¼©æ¯”é˜ˆå€¼
    log_prob_threshold: -0.8          # å¯¹æ•°æ¦‚ç‡é˜ˆå€¼
    no_speech_threshold: 0.6          # æ— è¯­éŸ³é˜ˆå€¼
    vad_filter: true                  # å¯ç”¨VADè¿‡æ»¤
    vad_parameters:
      min_silence_duration_ms: 800    # VADæœ€å°é™éŸ³æ—¶é•¿
  
  # åˆ†æ®µä¼˜åŒ–é…ç½®
  segmentation:
    method: "semantic"         # åˆ†æ®µæ–¹æ³•: "punctuation" æˆ– "semantic"
    min_segment_duration: 1.5  # æœ€å°åˆ†æ®µæ—¶é•¿ï¼ˆç§’ï¼‰
    max_segment_duration: 8.0  # æœ€å¤§åˆ†æ®µæ—¶é•¿ï¼ˆç§’ï¼‰
```

### æ–‡æœ¬ç¿»è¯‘é…ç½®

```yaml
translation:
  source_language: "zh"
  target_language: "en"
  model: "qwen-flash"              # ç¿»è¯‘æ¨¡å‹ï¼ˆé»˜è®¤qwen-flashï¼Œæ”¯æŒqwen-plusã€qwen-maxã€qwen3-max-2025-09-23ç­‰ï¼‰
  retry_strategy: "adaptive"       # é‡è¯•ç­–ç•¥: "simple" æˆ– "adaptive"ï¼ˆé»˜è®¤adaptiveï¼‰
  max_batch_size: 20               # æ‰¹é‡ç¿»è¯‘æ—¶ä¸€æ¬¡æœ€å¤šå¤„ç†çš„æ®µè½æ•°
  max_retries: 3                   # ç®€å•é‡è¯•ç­–ç•¥çš„æœ€å¤§é‡è¯•æ¬¡æ•°
  single_segment_retries: 3        # å•æ®µè½é‡è¯•çš„æœ€å¤§æ¬¡æ•°ï¼ˆè‡ªé€‚åº”ç­–ç•¥ç”¨ï¼‰
  enable_content_validation: true  # å¯ç”¨å†…å®¹éªŒè¯
  snippet_similarity_threshold: 0.7 # snippetç›¸ä¼¼åº¦é˜ˆå€¼
```

### éŸ³è‰²å…‹éš†é…ç½®

```yaml
voice_cloning:
  model_path: "./index-tts"    # IndexTTS2æ¨¡å‹ç›®å½•ï¼ˆç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼‰
  device: "cuda"               # è®¾å¤‡ç±»å‹
  sample_rate: 16000           # é‡‡æ ·ç‡
  max_text_tokens: 600         # æœ€å¤§æ–‡æœ¬tokenæ•°
  max_mel_tokens: 1815         # æœ€å¤§mel tokenæ•°
  enable_parallel: true        # å¯ç”¨å¹¶è¡Œå¤„ç†
  max_parallel_workers: 2      # æœ€å¤§å¹¶è¡Œå·¥ä½œçº¿ç¨‹æ•°
```

### éŸ³é¢‘åˆ†ç¦»é…ç½®

```yaml
audio_separation:
  enable_gpu: true           # å¯ç”¨GPUåŠ é€Ÿ
  quality_threshold: 0.3     # èƒŒæ™¯éŸ³ä¹æ£€æµ‹é˜ˆå€¼
  model: "2stems-16kHz"      # åˆ†ç¦»æ¨¡å‹
```

### è¯´è¯äººåˆ†ç¦»é…ç½®ï¼ˆå¤šè¯´è¯äººå¤„ç†ï¼‰

```yaml
speaker_tracks:
  enabled: true              # å¯ç”¨å¤šè¯´è¯äººå¤„ç†
  compact_concat: true      # ç´§å‡‘æ‹¼æ¥éŸ³è½¨
  min_gap_merge_ms: 100     # æœ€å°é—´éš”åˆå¹¶ï¼ˆæ¯«ç§’ï¼‰
  tse:                       # éŸ³è‰²åˆ†ç¦»å¢å¼ºé…ç½®
    enabled: true
    model: "ecapa-tse"
```

å®Œæ•´é…ç½®è¯´æ˜è¯·å‚è€ƒ `config.yaml` æ–‡ä»¶ä¸­çš„æ³¨é‡Šã€‚

## API å‚è€ƒ

### MediaProcessor ç±»

ä¸»è¦çš„åª’ä½“å¤„ç†ç±»ï¼Œæä¾›ç»Ÿä¸€çš„å¤„ç†æ¥å£ï¼ˆæ”¯æŒè§†é¢‘/éŸ³é¢‘ï¼‰ã€‚

**æ–¹æ³•**ï¼š
- `process(input_path, output_dir=None, language=None)`: å¤„ç†å•ä¸ªåª’ä½“æ–‡ä»¶
- `_get_duration(metadata)`: ä»å…ƒæ•°æ®è·å–æ—¶é•¿ä¿¡æ¯

### EnhancedMediaProcessor ç±»

å¢å¼ºçš„åª’ä½“å¤„ç†å™¨ï¼Œç»§æ‰¿è‡ªMediaProcessorï¼Œæ”¯æŒéŸ³é¢‘åˆ†ç¦»åŠŸèƒ½ã€‚

**æ–¹æ³•**ï¼š
- `process_with_output_manager(input_path, output_manager, language=None, force_separation=False)`: ä½¿ç”¨è¾“å‡ºç®¡ç†å™¨å¤„ç†ï¼Œæ”¯æŒéŸ³é¢‘åˆ†ç¦»
- ç»§æ‰¿è‡ªMediaProcessorçš„æ‰€æœ‰æ–¹æ³•

### WhisperProcessor ç±»

Whisper/Faster-Whisper è¯­éŸ³è¯†åˆ«å¤„ç†å™¨ï¼Œæ”¯æŒä¸¤ç§åç«¯ã€‚

**æ–¹æ³•**ï¼š
- `transcribe_audio(audio_path, output_dir=None)`: æ‰§è¡Œè¯­éŸ³è¯†åˆ«
- `transcribe_with_output_manager(audio_path, output_manager)`: ä½¿ç”¨è¾“å‡ºç®¡ç†å™¨è¿›è¡Œè¯­éŸ³è¯†åˆ«
- `transcribe_with_segments(audio_path, output_dir=None)`: å¸¦æ—¶é—´æ®µçš„è¯¦ç»†è½¬å½•
- `transcribe_with_translation(audio_path, output_dir=None, config=None)`: è¯­éŸ³è¯†åˆ«ã€åˆ†æ®µä¼˜åŒ–å’Œç¿»è¯‘çš„å®Œæ•´æµç¨‹
- `detect_language(audio_path)`: æ£€æµ‹éŸ³é¢‘è¯­è¨€
- `transcribe_with_progress(audio_path, output_dir=None, progress_callback=None)`: å¸¦è¿›åº¦å›è°ƒçš„è½¬å½•

### TextTranslator ç±»

æ–‡æœ¬ç¿»è¯‘å™¨ï¼Œæ”¯æŒæ‰¹é‡ç¿»è¯‘å’Œè‡ªé€‚åº”é‡è¯•ç­–ç•¥ã€‚

**æ–¹æ³•**ï¼š
- `translate_segments(segments, output_dir=None, output_manager=None)`: ç¿»è¯‘å¤šä¸ªéŸ³é¢‘æ®µè½
- `translate_segments_with_output_manager(segments, output_manager)`: ä½¿ç”¨è¾“å‡ºç®¡ç†å™¨ç¿»è¯‘åˆ†æ®µ

### VoiceCloner ç±»

éŸ³è‰²å…‹éš†å™¨ï¼Œä½¿ç”¨IndexTTS2å®ç°éŸ³è‰²å…‹éš†ï¼Œæ”¯æŒå¹¶è¡Œå¤„ç†ã€‚

**æ–¹æ³•**ï¼š
- `clone_voice(reference_audio, text, output_path, speaker_id=None)`: å…‹éš†å•ä¸ªè¯­éŸ³
- `clone_segments(segments, output_dir)`: å…‹éš†å¤šä¸ªéŸ³é¢‘ç‰‡æ®µ
- `clone_segments_with_output_manager(segments, output_manager)`: ä½¿ç”¨è¾“å‡ºç®¡ç†å™¨å…‹éš†ç‰‡æ®µ
- `clone_segments_parallel(segments, output_manager)`: å¹¶è¡Œå…‹éš†å¤šä¸ªç‰‡æ®µï¼ˆæ¨èï¼‰

### OutputManager ç±»

è¾“å‡ºæ–‡ä»¶ç®¡ç†å™¨ï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰è¾“å‡ºæ–‡ä»¶ï¼ŒåŒ…æ‹¬æŒ‰ä»»åŠ¡åˆ›å»ºç‹¬ç«‹ç›®å½•ã€‚

**æ–¹æ³•**ï¼š
- `create_task_directory()`: åˆ›å»ºä»»åŠ¡ä¸“å±ç›®å½•
- `get_file_path(step, file_type)`: è·å–æŒ‡å®šæ­¥éª¤çš„æ–‡ä»¶è·¯å¾„
- `get_segment_path(index)`: è·å–ç‰‡æ®µéŸ³é¢‘è·¯å¾„
- `get_ref_segment_path(index)`: è·å–å‚è€ƒéŸ³é¢‘è·¯å¾„
- `log(message)`: è®°å½•å¤„ç†æ—¥å¿—
- `setup_task_logging()`: è®¾ç½®ä»»åŠ¡çº§æ—¥å¿—
- `save_performance_stats()`: ä¿å­˜æ€§èƒ½ç»Ÿè®¡

## è¾“å‡ºæ–‡ä»¶è¯´æ˜

å¤„ç†å®Œæˆåï¼Œç³»ç»Ÿä¼šåœ¨è¾“å‡ºç›®å½•ä¸­æŒ‰ä»»åŠ¡åˆ›å»ºç‹¬ç«‹ç›®å½•ï¼ˆæ ¼å¼ï¼š`æ—¶é—´æˆ³_æ–‡ä»¶å`ï¼‰ï¼Œå¹¶ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

### æ­¥éª¤1ï¼šéŸ³é¢‘æå–
- `*_01_audio.wav`ï¼šæå–çš„åŸå§‹éŸ³é¢‘ï¼ˆ16kHzï¼Œå•å£°é“ï¼‰

### æ­¥éª¤2ï¼šéŸ³é¢‘åˆ†ç¦»
- `*_02_vocals.wav`ï¼šåˆ†ç¦»åçš„äººå£°è½¨é“
- `*_02_accompaniment.wav`ï¼šèƒŒæ™¯éŸ³ä¹è½¨é“ï¼ˆå¦‚æœå­˜åœ¨ï¼‰

### æ­¥éª¤3ï¼šå¤šè¯´è¯äººå¤„ç†ï¼ˆå¦‚æœå¯ç”¨ï¼‰
- `speakers/<speaker_id>/<speaker_id>.wav`ï¼šå„è¯´è¯äººçš„ç´§å‡‘éŸ³è½¨
- `speakers/<speaker_id>/<speaker_id>.json`ï¼šæ—¶é—´æ˜ å°„è¡¨ï¼ˆå…¨å±€æ—¶é—´ â†” ç´§å‡‘æ—¶é—´ï¼‰

### æ­¥éª¤4ï¼šè¯­éŸ³è¯†åˆ«

**ä¸»ä»»åŠ¡ç›®å½•**ï¼ˆåˆå¹¶åçš„ç»“æœï¼Œå…¨å±€æ—¶é—´ï¼‰:
- `*_04_whisper_raw_transcription.txt`ï¼šå®Œæ•´è½¬å½•æ–‡æœ¬
- `*_04_whisper_raw_word_timestamps.txt`ï¼šå•è¯çº§æ—¶é—´æˆ³ï¼ˆè°ƒè¯•ç”¨ï¼‰
- `*_04_whisper_raw_segments.txt`ï¼šWhisperåŸå§‹åˆ†æ®µæ–‡æœ¬ï¼ˆå¯è¯»æ ¼å¼ï¼Œè°ƒè¯•ç”¨ï¼‰
- `*_04_segments.txt`ï¼šåˆ†æ®µæ–‡æœ¬
- `*_04_segments.json`ï¼šåˆ†æ®µæ•°æ®ï¼ˆJSONæ ¼å¼ï¼ŒåŒ…å«æ—¶é—´æˆ³å’Œæ–‡æœ¬ï¼‰
- `*_04_whisper_raw.json`ï¼šWhisperåŸå§‹è¾“å‡ºï¼ˆè°ƒè¯•ç”¨ï¼‰

**å¤šè¯´è¯äººåœºæ™¯ - speakersç›®å½•**ï¼ˆå„è¯´è¯äººçš„åŸå§‹ç»“æœï¼Œç´§å‡‘æ—¶é—´ï¼‰:
- `speakers/<speaker_id>/<speaker_id>_04_whisper_raw.json`ï¼šè¯´è¯äººçš„WhisperåŸå§‹è¾“å‡ºï¼ˆç´§å‡‘æ—¶é—´ï¼‰
- `speakers/<speaker_id>/<speaker_id>_04_whisper_raw_segments.txt`ï¼šè¯´è¯äººçš„WhisperåŸå§‹åˆ†æ®µæ–‡æœ¬ï¼ˆç´§å‡‘æ—¶é—´ï¼‰
- `speakers/<speaker_id>/<speaker_id>_04_whisper_raw_transcription.txt`ï¼šè¯´è¯äººçš„è½¬å½•æ–‡æœ¬ï¼ˆç´§å‡‘æ—¶é—´ï¼‰
- `speakers/<speaker_id>/<speaker_id>_04_whisper_raw_word_timestamps.txt`ï¼šè¯´è¯äººçš„å•è¯çº§æ—¶é—´æˆ³ï¼ˆç´§å‡‘æ—¶é—´ï¼‰

**æ³¨æ„**: å¤šè¯´è¯äººåœºæ™¯ä¸‹ï¼Œspeakersç›®å½•ä¸­çš„æ–‡ä»¶ä½¿ç”¨**ç´§å‡‘æ—¶é—´**ï¼Œä¸»ä»»åŠ¡ç›®å½•ä¸­çš„æ–‡ä»¶ä½¿ç”¨**å…¨å±€æ—¶é—´**ã€‚

### æ­¥éª¤5ï¼šæ–‡æœ¬ç¿»è¯‘
- `*_05_translation.txt`ï¼šç¿»è¯‘ç»“æœï¼ˆå¸¦æ—¶é—´æˆ³ï¼‰
- `*_05_llm_interaction.txt`ï¼šLLMäº¤äº’è®°å½•ï¼ˆè°ƒè¯•ç”¨ï¼‰

### æ­¥éª¤6ï¼šå‚è€ƒéŸ³é¢‘æå–
- `ref_audio/*_06_ref_segment_000.wav`ï¼šç‰‡æ®µ0çš„å‚è€ƒéŸ³é¢‘
- `ref_audio/*_06_ref_segment_001.wav`ï¼šç‰‡æ®µ1çš„å‚è€ƒéŸ³é¢‘
- `ref_audio/*_06_ref_segment_*.wav`ï¼šå…¶ä»–ç‰‡æ®µçš„å‚è€ƒéŸ³é¢‘

### æ­¥éª¤7ï¼šéŸ³è‰²å…‹éš†
- `cloned_audio/*_07_segment_000.wav`ï¼šç‰‡æ®µ0çš„å…‹éš†éŸ³é¢‘
- `cloned_audio/*_07_segment_001.wav`ï¼šç‰‡æ®µ1çš„å…‹éš†éŸ³é¢‘
- `cloned_audio/*_07_segment_*.wav`ï¼šå…¶ä»–ç‰‡æ®µçš„å…‹éš†éŸ³é¢‘

### æ­¥éª¤8ï¼šéŸ³é¢‘åˆå¹¶
- `*_08_final_voice.wav`ï¼šå®Œæ•´çš„ç¿»è¯‘é…éŸ³è½¨é“

### æ­¥éª¤9ï¼šè§†é¢‘åˆæˆ
- `*_09_translated.mp4`ï¼šæœ€ç»ˆç¿»è¯‘è§†é¢‘

### å…¶ä»–æ–‡ä»¶
- `processing_log.txt`ï¼šå¤„ç†æ—¥å¿—
- `translation_stats.json`ï¼šæ€§èƒ½ç»Ÿè®¡ï¼ˆJSONæ ¼å¼ï¼‰
- `translation_stats.csv`ï¼šæ€§èƒ½ç»Ÿè®¡ï¼ˆCSVæ ¼å¼ï¼‰

## æ€§èƒ½ä¼˜åŒ–

- **æ¨¡å‹é¢„åŠ è½½**ï¼šå¯åŠ¨æ—¶é¢„åŠ è½½æ¨¡å‹ï¼Œé¿å…é¦–æ¬¡ä½¿ç”¨å»¶è¿Ÿ
- **æ‰¹é‡å¤„ç†**ï¼šæ–‡æœ¬ç¿»è¯‘é‡‡ç”¨æ‰¹é‡å¤„ç†ï¼Œæå‡æ•ˆç‡
- **GPU åŠ é€Ÿ**ï¼šWhisper/Faster-Whisper å’Œ IndexTTS2 æ”¯æŒ CUDA åŠ é€Ÿ
- **FP16 ç²¾åº¦**ï¼šIndexTTS2 ä½¿ç”¨åŠç²¾åº¦æµ®ç‚¹æ•°ï¼Œæå‡é€Ÿåº¦å¹¶å‡å°‘æ˜¾å­˜å ç”¨
- **å¹¶è¡Œå¤„ç†**ï¼šéŸ³è‰²å…‹éš†æ”¯æŒå¹¶è¡Œå¤„ç†å¤šä¸ªç‰‡æ®µ
- **Faster-Whisperåç«¯**ï¼šé»˜è®¤ä½¿ç”¨Faster-Whisperï¼ˆåŸºäºCTranslate2ï¼‰ï¼Œæ¯”åŸç”ŸWhisperæ›´å¿«
- **VADè¿‡æ»¤**ï¼šFaster-Whisperæ”¯æŒè¯­éŸ³æ´»åŠ¨æ£€æµ‹ï¼ˆVADï¼‰ï¼Œè¿‡æ»¤é™éŸ³æ®µï¼Œæå‡è¯†åˆ«æ•ˆç‡
- **æ™ºèƒ½é‡è¯•**ï¼šæ–‡æœ¬ç¿»è¯‘é‡‡ç”¨è‡ªé€‚åº”é‡è¯•ç­–ç•¥ï¼Œæé«˜æˆåŠŸç‡

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¾èµ–å®‰è£…å¤±è´¥**
   - ç¡®ä¿å·²æ¿€æ´» `index-tts/.venv` è™šæ‹Ÿç¯å¢ƒ
   - è¿è¡Œ `python tools/check_dependencies.py` æ£€æŸ¥ä¾èµ–çŠ¶æ€

2. **GPU åŠ é€Ÿä¸å¯ç”¨**
   - æ£€æŸ¥ CUDA å®‰è£…å’Œç‰ˆæœ¬
   - ç¡®è®¤ PyTorch æ”¯æŒ CUDA
   - åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½® `device: "cpu"` ä½¿ç”¨ CPU æ¨¡å¼

3. **å¤„ç†é€Ÿåº¦æ…¢**
   - å¯ç”¨æ¨¡å‹é¢„åŠ è½½
   - ä½¿ç”¨ GPU åŠ é€Ÿ
   - è°ƒæ•´æ‰¹é‡å¤„ç†å¤§å°

4. **å†…å­˜ä¸è¶³**
   - å‡å°æ‰¹é‡å¤„ç†å¤§å°
   - ä½¿ç”¨è¾ƒå°çš„ Whisper æ¨¡å‹
   - å…³é—­ä¸å¿…è¦çš„åŠŸèƒ½æ¨¡å—

5. **ç¿»è¯‘ç»“æœä¸å‡†ç¡®**
   - æ£€æŸ¥æºè¯­è¨€è¯†åˆ«æ˜¯å¦æ­£ç¡®
   - è°ƒæ•´ç¿»è¯‘æ¨¡å‹å‚æ•°
   - æ£€æŸ¥éŸ³é¢‘è´¨é‡

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

è¯¦ç»†çš„è´¡çŒ®æŒ‡å—è¯·å‚è€ƒï¼š[CONTRIBUTING.md](docs/CONTRIBUTING.md)

## å‚è€ƒèµ„æ–™

### ç”¨æˆ·æ–‡æ¡£
- [å®‰è£…æŒ‡å—](docs/INSTALL.md) - è¯¦ç»†çš„å®‰è£…å’Œé…ç½®è¯´æ˜
- [ä½¿ç”¨æŒ‡å—](docs/USAGE.md) - å®Œæ•´çš„ä½¿ç”¨æ–¹æ³•å’Œç¤ºä¾‹

### å¼€å‘è€…æ–‡æ¡£
- [è´¡çŒ®æŒ‡å—](docs/CONTRIBUTING.md) - å¦‚ä½•å‚ä¸é¡¹ç›®è´¡çŒ®
- [æµç¨‹æ–‡æ¡£](docs/WORKFLOW.md) - å®Œæ•´çš„9æ­¥éª¤æµç¨‹è¯´æ˜å’Œè®¾è®¡è¦ç‚¹
- [å¼€å‘æŒ‡å—](docs/DEVELOPER_GUIDE.md) - æŠ€æœ¯å®ç°ç»†èŠ‚ã€ä»£ç ä½ç½®ã€å¸¸è§é—®é¢˜åˆ†æ

### å…¶ä»–
- [IndexTTS2 æ–‡æ¡£](index-tts/README.md) - éŸ³è‰²å…‹éš†å­æ¨¡å—æ–‡æ¡£
